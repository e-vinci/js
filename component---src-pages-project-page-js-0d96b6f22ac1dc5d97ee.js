"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[355],{9802:function(e,t,n){var r=n(7294),a=n(6267),c=n.n(a);t.Z=function(e){var t,n,a=e.className,o=e.isBeingEdited,s=e.onChange,i=e.startContent,u=e.id,d=e.isInline,p=e.children;return o?t=c().decode(i):p?t=p:i&&(t=c().decode(i)),n=a||"",o&&(n+=" index__card__content__description--is-being-edited"),d&&(n+=" index__card__content__description--is-inline"),r.createElement("div",{className:n,contentEditable:!!o,onInput:function(e){var t={};t[u]=e.currentTarget.textContent,s(t)},suppressContentEditableWarning:!0},t)}},3290:function(e,t,n){n.d(t,{X:function(){return m},a:function(){return f}});var r=n(4942),a=n(5861),c=n(7757),o=n.n(c),s=n(7294),i=n(693),u=n(5735),d=n(144);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var l=s.createContext([{},function(){},{},function(){},{},function(){},{},function(){}]),f=function(e){var t=e.children,n=(0,s.useState)(void 0),r=n[0],a=n[1],c=(0,s.useState)(void 0),o=c[0],i=c[1],u=(0,s.useState)(void 0),d=u[0],p=u[1],f=(0,s.useState)(!1),m=f[0],_=f[1];return s.createElement(l.Provider,{value:[r,a,o,i,d,p,m,_]},t)},m=function(){var e=(0,u.Fp)(),t=e.instance,n=e.accounts,c=(0,s.useContext)(l),f=c[0],m=c[1],_=c[2],v=c[3],x=c[4],h=c[5],b=c[6],E=c[7],j=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projectgroups/"+r,"get",a,void 0);case 6:return c=e.sent,m(c),e.abrupt("return",c);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)(o().mark((function e(){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return r=e.sent,e.next=6,(0,i.Z)("users/role","get",r,void 0);case 6:return a=e.sent,v(a),e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,E(!1),e.next=7,(0,i.Z)("projects/projectgroups/"+r,"get",a,void 0);case 7:return c=e.sent,h(c),E(!0),e.abrupt("return",c);case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects","post",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+r._id,"DELETE",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+r._id+"/member","POST",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(o().mark((function e(r){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return a=e.sent,e.next=6,(0,i.Z)("projects/"+r._id+"/member","DELETE",a,void 0);case 6:return c=e.sent,e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,a.Z)(o().mark((function e(r,a){var c,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,d.t)(n,t);case 3:return c=e.sent,e.next=6,(0,i.Z)("projects/"+a,"PATCH",c,r);case 6:return s=e.sent,e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}();return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{projectGroupData:f,updateProjectGroupData:j,userData:_,updateUserData:g,projectData:x,updateProjectData:w,addOneProject:k,deleteOneProject:y,addMemberToProject:P,deleteMemberFromProject:C,updateProject:N,isLoaded:b,setIsLoaded:E})}},9896:function(e,t,n){var r=n(7294),a=n(3364),c=n(5514);t.Z=function(){return r.createElement("div",{className:"spinner"},r.createElement("div",{className:"spinner__overlay"}),r.createElement("div",{className:"spinner__animation"},r.createElement(a.G,{icon:c.LM3,className:"fa-3x fa-spin"})))}},8329:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(7294),a=n(1597),c=n(9147),o=n(1066),s=n(3290),i=n(5861),u=n(7757),d=n.n(u),p=n(9256),l=n(4942),f=(n(6267),n(3364)),m=n(5514),_=n(3405),v=n(9802);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){var t=e.project,n=e.setFilteredContents,a=(0,r.useState)(!1),c=a[0],o=a[1],u=(0,r.useState)(t.isPublic),l=u[0],x=u[1],b=(0,r.useState)({}),E=b[0],j=b[1],g=(0,s.X)(),w=g.deleteOneProject,k=g.updateProjectData,y=g.addMemberToProject,P=g.deleteMemberFromProject,C=g.updateProject,N=g.userData,O=g.projectGroupData,Z=g.projectData,D=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:return e.next=4,k(t.projectGroupName);case 4:n(void 0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t);case 2:if(e.sent,!k){e.next=7;break}return e.next=6,k(t.projectGroupName);case 6:n(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t);case 2:if(e.sent,!k){e.next=7;break}return e.next=6,k(t.projectGroupName);case 6:n(void 0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,i.Z)(d().mark((function e(){var r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=10;break}return e.next=3,C(E,t._id);case 3:if(r=e.sent,j({}),o(!1),!r){e.next=10;break}return e.next=9,k(t.projectGroupName);case 9:n(void 0);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(e){j((function(t){return h(h({},t),e)}))};return t?r.createElement("div",{className:"index__card"+(c?" index__card--is-being-edited":""),key:t.shortId,id:t.shortId},r.createElement("div",{className:"index__card__header"},r.createElement("span",null,"Projet N° "+t.shortId+" : "),r.createElement(v.Z,{isBeingEdited:c,id:"name",onChange:M,startContent:t.name,isInline:!0})),r.createElement("div",{className:"index__card__description"},N.isAdmin&&r.createElement(f.G,{icon:m.I7k,onClick:D}),(N.isAdmin||t.projectMembers.includes(N.userName)&&"end"!==O.status)&&!c?r.createElement(f.G,{icon:m.Xcf,onClick:function(){o(!0)}}):"","init"===O.status&&!Z.find((function(e){return e.projectMembers.includes(N.userName)}))&&t.projectMembers.length<O.maximumProjectMembers&&r.createElement(f.G,{icon:m.FKd,onClick:F}),"init"===O.status&&t.projectMembers.includes(N.userName)&&r.createElement(f.G,{icon:m.iC0,onClick:G}),c&&r.createElement(f.G,{icon:m.r6l,onClick:S}),c&&r.createElement(f.G,{icon:m.NBC,onClick:function(){o(!1),j({})}})),r.createElement("div",{className:"index__card__content"},void 0!==t.description?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Description"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"description",startContent:t.description,onChange:M})):""),r.createElement("div",{className:"index__card__content"},void 0!==t.presentationUrl?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Vidéo de présentation"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"presentationUrl",startContent:t.presentationUrl,onChange:M},r.createElement(p.Z,{src:t.presentationUrl}))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.frontendProductionUrl?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"URL du site"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendProductionUrl",startContent:t.frontendProductionUrl,onChange:M},r.createElement("a",{href:t.frontendProductionUrl,target:"_blank"},t.frontendProductionUrl))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.frontendRepo?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Repo frontend"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"frontendRepo",startContent:t.frontendRepo,onChange:M},r.createElement("a",{href:t.frontendRepo,target:"_blank"},t.frontendRepo))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.backendRepo?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Repo backend"),r.createElement(v.Z,{className:"index__card__content__description",isBeingEdited:c,id:"backendRepo",startContent:t.backendRepo,onChange:M},r.createElement("a",{href:t.backendRepo,target:"_blank"},t.backendRepo))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.projectMembers&&t.projectMembers.length>0?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Membres du projet"),r.createElement("div",{className:"index__card__content__description"},t.projectMembers.map((function(e){return(0,_.w)(e)})).join(", "))):""),r.createElement("div",{className:"index__card__content"},void 0!==t.isPublic?r.createElement(r.Fragment,null,r.createElement("div",{className:"index__card__content__title"},"Public ?"),r.createElement("div",{className:"index__card__content__description"},r.createElement("input",{type:"checkbox",checked:l,disabled:!c,onClick:function(e){x(!l),j(h(h({},E),{isPublic:!l}))}}))):"")):null},E=function(e){var t=e.projects,n=e.setFilteredContents;return!t||t.length<=0?null:r.createElement(r.Fragment,null,t.map((function(e){return r.createElement(b,{project:e,setFilteredContents:n})})))},j=n(9896),g=function(e){var t=e.associatedProjectGroupName,n=(0,s.X)(),a=n.projectGroupData,c=n.updateProjectGroupData,o=n.userData,u=n.updateUserData,p=n.isLoaded,l=n.projectData,f=n.addOneProject,m=n.updateProjectData,_=(0,r.useState)(void 0),v=_[0],x=_[1],h=(0,r.useState)(""),b=(h[0],h[1]),g=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return e.next=4,m(a._id);case 4:e.sent,x(void 0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,r.useEffect)((function(){w()}),[]);var w=function(){var e=(0,i.Z)(d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(t);case 3:return n=e.sent,e.next=6,u();case 6:return e.sent,e.next=9,m(n._id);case 9:e.sent,e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return r.createElement(r.Fragment,null,!p&&r.createElement(j.Z,null),void 0===a?"":r.createElement("div",{className:"pl-3 pt-3 pb-3 pr-3"},r.createElement("h3",{className:""},"Projets des groupes de ",a._id),r.createElement("div",{className:"index"},r.createElement("input",{type:"text","aria-label":"Search",placeholder:"Filtrez les contenus...",onChange:function(e){var t=e.target.value;b(e.target.value);var n=l.filter((function(e){var n=e.shortId,r=e.name,a=e.description;return r.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||t.length>0&&parseInt(t)===n}));n&&n.length>0?x(n):x(void 0)},className:"index__search"}),v&&v.length>0?r.createElement(E,{projects:v,setFilteredContents:x}):r.createElement(E,{projects:l,setFilteredContents:x})),void 0!==o&&o.isAdmin?r.createElement("button",{className:"index__button",onClick:g},"Ajouter projet"):""))},w=(0,o.O)((function(){var e=(0,a.useStaticQuery)("758242238"),t=null==e?void 0:e.site.siteMetadata.defaultAssociatedProjectGroupName;return r.createElement(s.a,null,r.createElement(c.Z,null,r.createElement(g,{associatedProjectGroupName:t})))}))},693:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(5861),a=n(7757),c=n.n(a);function o(e,t,n,r){return s.apply(this,arguments)}function s(){return(s=(0,r.Z)(c().mark((function e(t,n,r,a){var o,s,i,u,d,p,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="get"),o=new Headers,(s={}).method=n,r&&(i="Bearer "+r,o.append("Authorization",i)),a&&(s.body=JSON.stringify(a)),"post"!==n.toLowerCase()&&"patch"!==n.toLowerCase()&&"put"!==n.toLowerCase()||o.append("Content-Type","application/json"),s.headers=o,u="https://myjscourse-api.herokuapp.com/api/"+t,e.prev=9,e.next=12,fetch(u,s);case 12:if((d=e.sent).ok){e.next=21;break}return p=" Error code : "+d.status+" : "+d.statusText+"/nMessage : ",e.next=17,d.text();case 17:throw l=e.sent,(p+=l).search("expired"),new Error(p);case 21:return e.next=23,d.json();case 23:return e.abrupt("return",e.sent);case 26:throw e.prev=26,e.t0=e.catch(9),e.t0;case 29:case"end":return e.stop()}}),e,null,[[9,26]])})))).apply(this,arguments)}},144:function(e,t,n){n.d(t,{t:function(){return s}});var r=n(5861),a=n(7757),c=n.n(a),o=n(640);function s(e,t){return i.apply(this,arguments)}function i(){return(i=(0,r.Z)(c().mark((function e(t,n){var r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length>0)){e.next=16;break}return r={scopes:["openid"],account:t[0]},e.prev=2,e.next=5,n.acquireTokenSilent(r);case 5:return a=e.sent,e.abrupt("return",a.idToken);case 9:if(e.prev=9,e.t0=e.catch(2),!(e.t0 instanceof o.Yo)){e.next=16;break}return e.next=14,n.acquireTokenRedirect(r);case 14:return s=e.sent,e.abrupt("return",s.idToken);case 16:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}},3405:function(e,t,n){n.d(t,{w:function(){return r}});var r=function(e){var t=e.substring(0,e.indexOf("@")),n=t.substring(0,t.indexOf(".")),r=t.substring(t.indexOf(".")+1);return n=n.charAt(0).toUpperCase()+n.slice(1),(r=r.charAt(0).toUpperCase()+r.slice(1)).indexOf(".")>=0&&(r=(r=r.substring(r.indexOf(".")+1)).charAt(0).toUpperCase()+r.slice(1)),n+" "+r}}}]);
//# sourceMappingURL=component---src-pages-project-page-js-0d96b6f22ac1dc5d97ee.js.map